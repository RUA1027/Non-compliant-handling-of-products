# 生产线违规取放检测系统

## 项目背景
在PCB生产线上，某些环节严禁工人手动取放电路板。本系统利用机器视觉技术，自动监控视频画面，当检测到人手进入违规区域或进行违规操作时，系统会立即发出警报并弹出提示，同时记录违规事件。

## 功能特点
- **多重检测机制**：结合 MediaPipe 手部关键点检测、肤色检测和运动检测，确保在各种光照和背景下的鲁棒性。
- **实时报警系统**：支持视觉闪烁报警、声音报警（Windows `winsound`）和日志记录。
- **GUI 交互界面**：提供直观的图形界面，支持摄像头实时监控和视频文件回放。
- **自动截图记录**：发生违规时自动保存现场截图，便于后续追溯。
- **ROI 区域配置**：支持设置感兴趣区域（ROI），仅监控特定范围。

## 系统架构
- `main.py`: 命令行启动入口，支持批量测试。
- `gui.py`: 图形界面启动入口，适合日常监控使用。
- `hand_detector.py`: 核心检测算法模块。
- `alarm_system.py`: 报警逻辑与事件管理模块。
- `video_processor.py`: 视频流处理与渲染模块。
- `config.py`: 系统参数配置文件。

## 安装与运行

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行 GUI 界面 (推荐)
```bash
python gui.py
```

### 3. 运行命令行模式
```bash
# 处理指定视频
python main.py -v 视频素材/异常/异常1.mp4

# 测试所有示例视频
python main.py --test
```

## 操作说明
- **暂停/继续**: 点击界面上的“暂停”按钮或按键盘 `p` 键。
- **重置报警**: 当警报触发后，点击“重置报警”或按 `r` 键恢复正常监控状态。
- **截图**: 系统会自动保存违规截图至 `screenshots/` 目录，手动截图可按 `s` 键。

## 开发者
一名有着丰富项目实战经验的机器视觉高级工程师
